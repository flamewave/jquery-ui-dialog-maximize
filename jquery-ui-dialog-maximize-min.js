/*
* jQuery UI Dialog Maximize Extension v1.1
*
* Copyright 2011, Tony Kramer
* Dual licensed under the MIT or GPL Version 2 licenses.
* https://github.com/flamewave/jquery-ui-dialog-maximize/raw/master/GPL-LICENSE.txt
* https://github.com/flamewave/jquery-ui-dialog-maximize/raw/master/MIT-LICENSE.txt
*/
(function(a){if(a.ui.dialog){var c=a.ui.dialog.prototype._create;var b=a.ui.dialog.prototype.close;var d=a.ui.dialog.prototype.open;var e=a.ui.dialog.prototype._setOption;a.ui.dialog.maximizeExtension={version:"1.1",globalization:{textMaximize:"Maximize",textRestore:"Restore"}};a.extend(true,a.ui.dialog.prototype,{_isMaximized:false,_originals:null,options:{maximize:false,openMaximized:false,maximizeFx:{easing:null,duration:"normal",complete:null},restoreFx:{easing:null,duration:"normal",complete:null}},_setupMaximize:function(){var f=this;if(f.options.maximize!==true||f.uiDialog.find(".ui-dialog-titlebar-maximize").length){return}a('<a href="#" class="ui-dialog-titlebar-maximize ui-corner-all" role="button" title="'+a.ui.dialog.maximizeExtension.globalization.textMaximize+'"><span class="ui-icon ui-icon-extlink"></span></a>').insertBefore(f.uiDialog.find(".ui-dialog-titlebar .ui-dialog-titlebar-close")).click(function(g){g.preventDefault();if(f._isMaximized){f.restore()}else{f.maximize()}return false}).bind("mouseenter",function(){a(this).addClass("ui-state-hover")}).bind("mouseleave",function(){a(this).removeClass("ui-state-hover")})},_removeMaximize:function(){this.uiDialog.find(".ui-dialog-titlebar-maximize").remove()},_create:function(){c.call(this);this._setupMaximize()},_setOption:function(f,g){if(f==="maximize"){if(g){this._setupMaximize()}else{this._removeMaximize()}}e.apply(this,arguments)},close:function(){if(!this._isOpen){return}b.call(this);if(this._isMaximized){this.options.position=this._originals.opts.position;this.options.width=this._originals.opts.width;this.options.height=this._originals.opts.height;if(this.options.maximize){this._setMaxRestoreIcon(false)}this._isMaximized=false;this._originals=null}},open:function(){if(this._isOpen){return}if(this.options.openMaximized){var f=this._calcMaxSize(true);this.options.position=["left","top"];this.options.width=f.w;this.options.height=f.h;if(this.options.maximize){this._setMaxRestoreIcon(true)}this._isMaximized=true}d.call(this)},isMaximized:function(){return this._isMaximized},maximize:function(f){if(this._isMaximized||!this._isOpen){return}this.moveToTop();var g=this._calcMaxSize(true);this._maxRestoreAnimated(f===undefined?this.options.maximizeFx:a.isFunction(f)?a.extend({},this.options.maximizeFx,{complete:f}):f,{left:a(window).scrollLeft(),top:a(window).scrollTop(),width:g.w+"px",height:g.h+"px"},{position:["left","top"],width:g.w,height:g.h},true);return this},restore:function(f){if(!this._isMaximized||this._originals===null||!this._isOpen){return}this.moveToTop();this._maxRestoreAnimated(f===undefined?this.options.restoreFx:a.isFunction(f)?a.extend({},this.options.restoreFx,{complete:f}):f,this._originals.rect,this._originals.opts,false);return this},_calcMaxSize:function(f){if(f){this._originals={opts:{position:this.options.position,width:this.options.width,height:this.options.height},rect:a.extend({width:this.uiDialog.innerWidth(),height:this.uiDialog.innerHeight()},this.uiDialog.position())}}return{w:a(window).width()-parseInt(a(document.body).css("padding-left"),10)-parseInt(a(document.body).css("padding-right"),10),h:a(window).height()-parseInt(a(document.body).css("padding-top"),10)-parseInt(a(document.body).css("padding-bottom"),10)}},_setMaxRestoreIcon:function(f){this.uiDialog.find(".ui-dialog-titlebar-maximize .ui-icon").toggleClass("ui-icon-extlink",!f).toggleClass("ui-icon-newwin",f).attr("title",f?a.ui.dialog.maximizeExtension.globalization.textRestore:a.ui.dialog.maximizeExtension.globalization.textMaximize)},_maxRestore:function(g,f){this._setOptions(g);if(this.options.maximize){this._setMaxRestoreIcon(f)}this._isMaximized=f;if(!f){this._originals=null}},_maxRestoreAnimated:function(f,k,j,i){var l=this;if(!f){l.uiDialog.css(k);l._maxRestore(j,i);l._trigger(i?"maximized":"restored");return}var m=-1,g=-1;l.uiDialog.animate(k,{duration:f.duration,easing:f.easing,step:function(n,h){if(h.prop=="width"){m=n}else{if(h.prop=="height"){g=n}}if(m!==-1&&g!==-1){l._setOptions({width:m,height:g});m=g=-1}},complete:function(){l._maxRestore(j,i);if(a.isFunction(f.complete)){f.complete.call(this)}l._trigger(i?"maximized":"restored")}})}})}})(jQuery);